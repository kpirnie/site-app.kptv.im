var DOMReady=function(t){"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&t()})};!function(){"use strict";const t={init:function(){this.initScrollToTop(),this.initMobileMenu(),this.initTableSort(),this.initSearch(),this.initPerPage(),this.initTooltips(),this.initConfirmActions(),console.log("KPTV Stream Manager initialized")},initScrollToTop:function(){const t=document.getElementById("kptv-scroll-top");if(!t)return;window.addEventListener("scroll",function(){window.scrollY>300?t.classList.add("visible"):t.classList.remove("visible")},{passive:!0}),t.addEventListener("click",function(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})},initMobileMenu:function(){document.querySelectorAll(".kptv-offcanvas-nav a:not(.uk-parent > a)").forEach(function(t){t.addEventListener("click",function(){const t=document.getElementById("kptv-mobile-nav");t&&"undefined"!=typeof UIkit&&UIkit.offcanvas(t).hide()})});document.querySelectorAll(".kptv-offcanvas-nav .uk-parent > a").forEach(function(t){t.addEventListener("click",function(t){})})},initTableSort:function(){const t=document.querySelectorAll(".kptv-table th[data-sort]");t.forEach(function(e){e.style.cursor="pointer",e.addEventListener("click",function(){const e=this.closest("table").querySelector("tbody"),n=Array.from(e.querySelectorAll("tr")),o=(this.dataset.sort,Array.from(this.parentElement.children).indexOf(this)),i=this.classList.contains("asc");t.forEach(function(t){t.classList.remove("asc","desc")}),n.sort(function(t,e){const n=t.children[o].textContent.trim(),c=e.children[o].textContent.trim(),r=parseFloat(n),a=parseFloat(c);return isNaN(r)||isNaN(a)?i?c.localeCompare(n):n.localeCompare(c):i?a-r:r-a}),this.classList.add(i?"desc":"asc"),n.forEach(function(t){e.appendChild(t)})})})},initSearch:function(){document.querySelectorAll(".kptv-search input").forEach(function(e){let n;e.addEventListener("input",function(){clearTimeout(n);const e=this.value.toLowerCase(),o=document.querySelector(this.dataset.target||".kptv-table");n=setTimeout(function(){if(!o)return;o.querySelectorAll("tbody tr").forEach(function(t){const n=t.textContent.toLowerCase();t.style.display=n.includes(e)?"":"none"}),t.updateVisibleCount(o)},300)})})},initPerPage:function(){const e=document.querySelectorAll(".kptv-per-page-btn");e.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),e.forEach(function(t){t.classList.remove("active")}),this.classList.add("active");const o=this.dataset.perpage,i=document.querySelector(this.dataset.target||".kptv-table");if(!i)return;const c=i.querySelectorAll("tbody tr"),r="all"===o,a=parseInt(o,10);c.forEach(function(t,e){t.style.display=r||e<a?"":"none"}),t.updateVisibleCount(i)})})},updateVisibleCount:function(t){const e=document.querySelector(".kptv-record-count");if(!e||!t)return;const n=t.querySelectorAll("tbody tr").length,o=t.querySelectorAll('tbody tr:not([style*="display: none"])').length;e.textContent="Showing "+o+" of "+n+" records"},initTooltips:function(){},initConfirmActions:function(){document.querySelectorAll("[data-confirm]").forEach(function(t){t.addEventListener("click",function(t){const e=this.dataset.confirm||"Are you sure?";confirm(e)||(t.preventDefault(),t.stopPropagation())})})},formatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},debounce:function(t,e){let n;return function(){const o=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,t.apply(o,i)},e)}}};DOMReady(function(){console.debug("DOM is ready. All libraries are loaded."),t.init()}),window.KPTV=t}();